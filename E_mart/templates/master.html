<!DOCTYPE html>
<html class="no-js" lang="zxx">
  {% load static %}
  <!-- index-231:32-->
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <title>
      {% block title %}Welcome to E-Mart - Your One-Stop Shop{% endblock %}
    </title>
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Favicon -->
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="{% static 'images/favicon.png' %}"
    />
    <!-- Material Design Iconic Font-V2.2.0 -->
    <link
      rel="stylesheet"
      href="{% static 'css/material-design-iconic-font.min.css' %}"
    />
    <!-- Font Awesome -->
    <link rel="stylesheet" href="{% static 'css/font-awesome.min.css' %}" />
    <!-- Font Awesome Stars-->
    <link rel="stylesheet" href="{% static 'css/fontawesome-stars.css' %}" />
    <!-- Meanmenu CSS -->
    <link rel="stylesheet" href="{% static 'css/meanmenu.css' %}" />
    <!-- owl carousel CSS -->
    <link rel="stylesheet" href="{% static 'css/owl.carousel.min.css' %}" />
    <!-- Slick Carousel CSS -->
    <link rel="stylesheet" href="{% static 'css/slick.css' %}" />
    <!-- Animate CSS -->
    <link rel="stylesheet" href="{% static 'css/animate.css' %}" />
    <!-- Jquery-ui CSS -->
    <link rel="stylesheet" href="{% static 'css/jquery-ui.min.css' %}" />
    <!-- Venobox CSS -->
    <link rel="stylesheet" href="{% static 'css/venobox.css' %}" />
    <!-- Nice Select CSS -->
    <link rel="stylesheet" href="{% static 'css/nice-select.css' %}" />
    <!-- Magnific Popup CSS -->
    <link rel="stylesheet" href="{% static 'css/magnific-popup.css' %}" />
    <!-- Bootstrap V4.1.3 Fremwork CSS -->
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}" />
    <!-- Helper CSS -->
    <link rel="stylesheet" href="{% static 'css/helper.css' %}" />
    <!-- Main Style CSS -->
    <link rel="stylesheet" href="{% static 'css/style.css' %}" />
    <!-- Responsive CSS -->
    <link rel="stylesheet" href="{% static 'css/responsive.css' %}" />
    <!-- Modernizr js -->
    <script src="{% static 'js/vendor/modernizr-2.8.3.min.js' %}"></script>
    
  </head>
  <body>
    <!--[if lt IE 8]>
      <p class="browserupgrade">
        You are using an <strong>outdated</strong> browser. Please
        <a href="http://browsehappy.com/">upgrade your browser</a> to improve
        your experience.
      </p>
    <![endif]-->
    <!-- Begin Body Wrapper -->
    <div class="body-wrapper">
      <!-- Begin Header Area -->
      <header>
        <!-- Begin Header Top Area -->
        <div class="header-top">
          <div class="container">
            <div class="row">
              <!-- Begin Header Top Left Area -->
              <div class="col-lg-3 col-md-4">
                <div class="header-top-left">
                  <ul class="phone-wrap">
                    <li>
                      <span>Telephone:</span
                      ><a href="#">+123 456 7890</a>
                    </li>
                  </ul>
                </div>
              </div>
              <!-- Header Top Left Area End Here -->
              <!-- Begin Header Top Right Area -->
              <div class="col-lg-9 col-md-8">
  <div class="header-top-right">
    <ul class="ht-menu">
      {% if user.is_authenticated %}
        <!-- Show for authenticated users -->
        <li>
          <span><b>Welcome,</b>{{ user.username }}!</span>
        </li>
        <li>
          <a href="{% url 'profile' %}">Profile</a>
        </li>
        <li>
          <form method="post" action="{% url 'logout' %}">
  {% csrf_token %}
  <button type="submit" class="btn btn-link">Logout</button>
</form>
        </li>
      {% else %}
        <!-- Show for unauthenticated users -->
        <li>
          <a href="{% url 'login' %}">Sign In</a>
        </li>
        <li>
          <a href="{% url 'signup' %}">Sign Up</a>
        </li>
      {% endif %}
    </ul>
  </div>
</div>
              <!-- Header Top Right Area End Here -->
            </div>
          </div>
        </div>
        <!-- Header Top Area End Here -->
        <!-- Begin Header Middle Area -->
        <div class="header-middle pl-sm-0 pr-sm-0 pl-xs-0 pr-xs-0">
          <div class="container">
                </div>
              </div>
              <!-- Header Top Right Area End Here -->
            </div>
          </div>
        </div>
        <!-- Header Top Area End Here -->
        <!-- Begin Header Middle Area -->
        <div class="header-middle pl-sm-0 pr-sm-0 pl-xs-0 pr-xs-0">
          <div class="container">
            <div class="row">
              <!-- Begin Header Logo Area -->
              <div class="col-lg-3">
                <div class="logo pb-sm-30 pb-xs-30">
                  <a href="{% url 'index' %}">
                    <img src="{% static 'images/menu/logo/logo.webp' %}" alt=""  height="100px" width="100px"/>
                  </a>
                </div>
              </div>
              <!-- Header Logo Area End Here -->
              <!-- Begin Header Middle Right Area -->
              <div class="col-lg-9 pl-0 ml-sm-15 ml-xs-15">
                <!-- Begin Header Middle Searchbox Area -->
                <form action="#" class="hm-searchbox">
                  <select class="nice-select select-search-category">
                    <option value="0">All</option>
                    <option value="10">Laptops</option>
                    <option value="17">- - Prime Video</option>
                    <option value="20">- - - - All Videos</option>
                    <option value="21">- - - - Blouses</option>
                    <option value="22">- - - - Evening Dresses</option>
                    <option value="23">- - - - Summer Dresses</option>
                    <option value="24">- - - - T-shirts</option>
                    <option value="25">- - - - Rent or Buy</option>
                    <option value="26">- - - - Your Watchlist</option>
                    <option value="27">- - - - Watch Anywhere</option>
                    <option value="28">- - - - Getting Started</option>
                    <option value="18">- - - - Computers</option>
                    <option value="29">- - - - More to Explore</option>
                    <option value="30">- - - - TV &amp; Video</option>
                    <option value="31">- - - - Audio &amp; Theater</option>
                    <option value="32">- - - - Camera, Photo</option>
                    <option value="33">- - - - Cell Phones</option>
                    <option value="34">- - - - Headphones</option>
                    <option value="35">- - - - Video Games</option>
                    <option value="36">- - - - Wireless Speakers</option>
                    <option value="19">- - - - Electronics</option>
                    <option value="37">- - - - Amazon Home</option>
                    <option value="38">- - - - Kitchen &amp; Dining</option>
                    <option value="39">- - - - Furniture</option>
                    <option value="40">- - - - Bed &amp; Bath</option>
                    <option value="41">- - - - Appliances</option>
                    <option value="11">TV &amp; Audio</option>
                    <option value="42">- - Chamcham</option>
                    <option value="45">- - - - Office</option>
                    <option value="47">- - - - Gaming</option>
                    <option value="48">- - - - Chromebook</option>
                    <option value="49">- - - - Refurbished</option>
                    <option value="50">- - - - Touchscreen</option>
                    <option value="51">- - - - Ultrabooks</option>
                    <option value="52">- - - - Blouses</option>
                    <option value="43">- - Meito</option>
                    <option value="53">- - - - Hard Drives</option>
                    <option value="54">- - - - Graphic Cards</option>
                    <option value="55">- - - - Processors (CPU)</option>
                    <option value="56">- - - - Memory</option>
                    <option value="57">- - - - Motherboards</option>
                    <option value="58">- - - - Fans &amp; Cooling</option>
                    <option value="59">- - - - CD/DVD Drives</option>
                    <option value="44">- - Sony Bravia</option>
                    <option value="60">- - - - Sound Cards</option>
                    <option value="61">- - - - Cases &amp; Towers</option>
                    <option value="62">- - - - Casual Dresses</option>
                    <option value="63">- - - - Evening Dresses</option>
                    <option value="64">- - - - T-shirts</option>
                    <option value="65">- - - - Tops</option>
                    <option value="12">Smartphone</option>
                    <option value="66">- - Camera Accessories</option>
                    <option value="68">- - - - Octa Core</option>
                    <option value="69">- - - - Quad Core</option>
                    <option value="70">- - - - Dual Core</option>
                    <option value="71">- - - - 7.0 Screen</option>
                    <option value="72">- - - - 9.0 Screen</option>
                    <option value="73">- - - - Bags &amp; Cases</option>
                    <option value="67">- - XailStation</option>
                    <option value="74">- - - - Batteries</option>
                    <option value="75">- - - - Microphones</option>
                    <option value="76">- - - - Stabilizers</option>
                    <option value="77">- - - - Video Tapes</option>
                    <option value="78">- - - - Memory Card Readers</option>
                    <option value="79">- - - - Tripods</option>
                    <option value="13">Cameras</option>
                    <option value="14">headphone</option>
                    <option value="15">Smartwatch</option>
                    <option value="16">Accessories</option>
                  </select>
                  <input type="text" placeholder="Enter your search key ..." />
                  <button class="li-btn" type="submit">
                    <i class="fa fa-search"></i>
                  </button>
                </form>
                <!-- Header Middle Searchbox Area End Here -->
                <!-- Begin Header Middle Right Area -->
                <div class="header-middle-right">
    <ul class="hm-menu">
        <!-- Begin Header Middle Wishlist Area -->
        <li class="hm-wishlist">
            <a href="{% url 'wishlist' %}">
                <span class="cart-item-count wishlist-item-count" id="wishlist-count">
                    {{ wishlist_count|default:0 }}
                </span>
                <i class="fa fa-heart-o"></i>
            </a>
        </li>
        <!-- Header Middle Wishlist Area End Here -->
    </ul>
</div>
                <!-- Header Middle Right Area End Here -->
              </div>
              <!-- Header Middle Right Area End Here -->
            </div>
          </div>
        </div>
        <!-- Header Middle Area End Here -->
        <!-- Begin Header Bottom Area -->
        <div class="header-bottom header-sticky d-none d-lg-block">
          <div class="container">
            <div class="row">
              <div class="col-lg-12">
                <!-- Begin Header Bottom Menu Area -->
                <div class="hb-menu hb-menu-2 d-xl-block">
                  <nav>
                    <ul>
                      <li class="active">
                        <a href="{% url 'index' %}">Home</a>
                      </li>
                      <li>
                        <a href="{% url 'shop' %}">Shop</a>
                      </li>
                      <li>
                        <a href="{% url 'blog_list' %}">Blog</a>
                      </li>
                      <li class="dropdown-holder">
                        <a href="{% url 'index' %}">Page</a>
                        <ul class="hb-dropdown">
                          <li>
                            <a href="{% url 'order_list' %}">Order History</a>
                          </li>
                          <li><a href="{% url 'checkout' %}">Checkout</a></li>

                          <li><a href="{% url 'wishlist' %}">Wishlist</a></li>
                          <li>
                            <a href="{% url 'cart_detail' %}">Shopping Cart</a>
                          </li>
                        </ul>
                      </li>
                      <li><a href="{% url 'about_us' %}">About Us</a></li>
                      <li><a href="{% url 'contact' %}">Contact</a></li>

                      <!-- Begin Header Bottom Menu Information Area -->
                      <li class="hb-info f-right p-0 d-sm-none d-lg-block">
                        <span>We Provide the Best Quality Products</span>
                      </li>
                      <!-- Header Bottom Menu Information Area End Here -->
                    </ul>
                  </nav>
                </div>
                <!-- Header Bottom Menu Area End Here -->
              </div>
            </div>
          </div>
        </div>
        <!-- Header Bottom Area End Here -->
        <!-- Begin Mobile Menu Area -->
        <div class="mobile-menu-area d-lg-none d-xl-none col-12">
          <div class="container">
            <div class="row">
              <div class="mobile-menu"></div>
            </div>
          </div>
        </div>
        <!-- Mobile Menu Area End Here -->
      </header>
      <!-- Header Area End Here -->

      <!-- MAIN CONTENT AREA - This is where your body block content will appear -->
      <main id="MainContent" class="main-content" role="main">
        {% block content %}
        <!-- Default content goes here if no content is provided -->
        {% endblock %}
      </main>
      <!-- END MAIN CONTENT AREA -->

      <!--Footer-->

      <!--End Footer-->

      <!--Scoll Top-->
      <span id="site-scroll"><i class="icon anm anm-angle-up-r"></i></span>
      <!--End Scoll Top-->

      <!-- Including Jquery -->
      <script src="{% static 'js/vendor/jquery-1.12.4.min.js' %}"></script>
      <!-- Popper js -->
      <script src="{% static 'js/vendor/popper.min.js' %}"></script>
      <!-- Bootstrap V4.1.3 Fremwork js -->
      <script src="{% static 'js/bootstrap.min.js' %}"></script>
      <!-- Ajax Mail js -->
      <script src="{% static 'js/ajax-mail.js' %}"></script>
      <!-- Meanmenu js -->
      <script src="{% static 'js/jquery.meanmenu.min.js' %}"></script>
      <!-- Wow.min js -->
      <script src="{% static 'js/wow.min.js' %}"></script>
      <!-- Slick Carousel js -->
      <script src="{% static 'js/slick.min.js' %}"></script>
      <!-- Owl Carousel-2 js -->
      <script src="{% static 'js/owl.carousel.min.js' %}"></script>
      <!-- Magnific popup js -->
      <script src="{% static 'js/jquery.magnific-popup.min.js' %}"></script>
      <!-- Isotope js -->
      <script src="{% static 'js/isotope.pkgd.min.js' %}"></script>
      <!-- Imagesloaded js -->
      <script src="{% static 'js/imagesloaded.pkgd.min.js' %}"></script>
      <!-- Mixitup js -->
      <script src="{% static 'js/jquery.mixitup.min.js' %}"></script>
      <!-- Countdown -->
      <script src="{% static 'js/jquery.countdown.min.js' %}"></script>
      <!-- Counterup -->
      <script src="{% static 'js/jquery.counterup.min.js' %}"></script>
      <!-- Waypoints -->
      <script src="{% static 'js/waypoints.min.js' %}"></script>
      <!-- Barrating -->
      <script src="{% static 'js/jquery.barrating.min.js' %}"></script>
      <!-- Jquery-ui -->
      <script src="{% static 'js/jquery-ui.min.js' %}"></script>
      <!-- Venobox -->
      <script src="{% static 'js/venobox.min.js' %}"></script>
      <!-- Nice Select js -->
      <script src="{% static 'js/jquery.nice-select.min.js' %}"></script>
      <!-- ScrollUp js -->
      <script src="{% static 'js/scrollUp.min.js' %}"></script>
      <!-- Main/Activator js -->
      <script src="{% static 'js/main.js' %}"></script>
    </div>
    <script>
function updateWishlistCount() {
    // Function to update wishlist count in header
    if (typeof wishlist_count !== 'undefined') {
        const countElement = document.getElementById('wishlist-count');
        if (countElement) {
            countElement.textContent = wishlist_count;
        }
    }
}

// Function to add item to wishlist with AJAX
function addToWishlistAjax(productId, buttonElement) {
    // Show loading state
    const originalText = buttonElement.innerHTML;
    buttonElement.innerHTML = '<i class="fa fa-spinner fa-spin"></i>';
    buttonElement.disabled = true;
    
    fetch(`/wishlist/add/${productId}/`, {
        method: 'GET',
        headers: {
            'X-Requested-With': 'XMLHttpRequest',
            'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]')?.value || ''
        }
    })
    .then(response => response.json())
    .then(data => {
        // Update wishlist count in header
        const countElement = document.getElementById('wishlist-count');
        if (countElement && data.wishlist_count !== undefined) {
            countElement.textContent = data.wishlist_count;
        }
        
        // Show message (you can customize this)
        if (data.message) {
            // You can show a toast notification here
            console.log(data.message);
        }
        
        // Update button state
        if (data.created) {
            buttonElement.innerHTML = '<i class="fa fa-heart text-danger"></i>';
            buttonElement.title = 'Remove from wishlist';
        } else {
            buttonElement.innerHTML = originalText;
        }
    })
    .catch(error => {
        console.error('Error:', error);
        buttonElement.innerHTML = originalText;
    })
    .finally(() => {
        buttonElement.disabled = false;
    });
}

// Update wishlist buttons to use AJAX (optional)
document.addEventListener('DOMContentLoaded', function() {
    // Find all wishlist buttons and add AJAX functionality
    const wishlistButtons = document.querySelectorAll('[data-wishlist-add]');
    wishlistButtons.forEach(button => {
        button.addEventListener('click', function(e) {
            e.preventDefault();
            const productId = this.getAttribute('data-product-id');
            if (productId) {
                addToWishlistAjax(productId, this);
            }
        });
    });
});
</script>
  </body>
</html>
